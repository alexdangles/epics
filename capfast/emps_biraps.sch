[schematic2]
uniq 8
[tools]
[detail]
w 2298 1739 100 0 n#1 ecalcos.$(PS):DRVDISABLE.FLNK 2232 1736 2496 1736 outhier.flink.p
w 1668 939 100 0 n#2 trcalcos.$(PS):STATUS.INPL 1800 936 1536 936 1536 1840 1112 1840 inhier.enable.P
w 2220 1099 100 0 n#3 trcalcos.$(PS):STATUS.VAL 2088 1096 2352 1096 outhier.statok.p
w 1096 1131 100 0 n#4 trcalcos.$(PS):STATCOMM.SLNK 1208 1128 984 1128 inhier.scanin.P
w 1532 1355 100 0 n#5 trcalcos.$(PS):STATCOMM.FLNK 1496 1352 1568 1352 1568 904 1800 904 trcalcos.$(PS):STATUS.SLNK
w 1548 1323 100 0 n#6 trcalcos.$(PS):STATCOMM.VAL 1496 1320 1600 1320 1600 1064 1800 1064 trcalcos.$(PS):STATUS.INPH
w 2124 1131 100 0 n#7 trcalcos.$(PS):STATUS.FLNK 2088 1128 2160 1128 2160 1384 1816 1384 1816 1512 1944 1512 ecalcos.$(PS):DRVDISABLE.SLNK
w 1946 1898 -100 0 n#2 ecalcos.$(PS):DRVDISABLE.INPA 1944 1896 1640 1896 1640 1760 1536 1760 junction
n 2619 1971 3086 2043 100
FUNCTIONALITY:
CHECK THAT BiRa DEVICE OPTICS ELEMENT IS ON,
COMMUNICATING AND NOT IN TIMEOUT STATE.
_
n 2217 1322 2538 1418 100
LED RULES FOR $(D)$(PS):STATUS:
0: PATH BAD -> RED
1: PATH GOOD -> GREEN
2: DISABLED -> BLACK
_
n 2812 1987 3215 2057 150
Functionality:
Please add functionality here
_
[cell use]
use bb200tr 712 632 100 0 bb200tr#2
xform 0 1992 1432
p 2296 824 150 0 -1 seta:M. Rowe
p 2152 1016 150 0 -1 sets:E-Linac Control System
p 2152 984 100 0 -1 sett0:Machine Protect System
p 2152 952 100 0 -1 sett1:Optics Subsystem - Stream Device PS Status
p 2568 824 150 0 -1 setdat:2016/08/15
p 2328 872 200 0 -1 setd:$Revision: 1.1 $
p 2168 760 150 0 -1 setf:emps_biraps.sch
use trcalcos 1884 795 100 0 $(PS):STATUS
xform 0 1944 1096
p 1828 795 100 0 -1 PV:$(D)
p 1633 1282 100 0 -1 def(INPA):$(PS):STATON
p 1622 1249 100 0 -1 def(INPB):$(PS):STATTMO
p 1644 1214 100 0 -1 def(INPC):$(PS):FAULT
p 1631 1183 100 0 -1 def(INPD):$(PS):INTFLT0
p 1880 1256 150 0 0 CALC:L?((A&!(B))?1:0):2
p 1879 1235 100 0 1 OCAL:L?!H?3:B?2:!A?1:(!(C|D|E|F|G)?5:0):4
p 2094 1059 100 0 1 def(OUT):$(D)$(PS):STATTEXT PP
p 1880 1000 100 0 1 OOPT:Every Time
p 1878 978 100 0 1 DOPT:Use OCAL
p 1635 1153 100 0 -1 def(INPE):$(PS):INTFLT1
p 1623 1119 100 0 -1 def(INPF):$(PS):KLIXFLT0
p 1625 1086 100 0 -1 def(INPG):$(PS):KLIXFLT1
p 1590 1058 100 0 0 def(INPH):
p 1565 1024 100 0 0 def(INPI):
p 1624 993 100 0 0 def(INPJ):
use embbis 2730 1192 100 0 $(PS):STATTEXT
xform 0 2824 1256
p 2766 1158 100 0 1 ONVL:1
p 2769 1141 100 0 1 TWVL:2
p 2771 1124 100 0 1 THVL:3
p 2856 1176 100 0 1 ZRST:OK
p 2851 1158 100 0 1 ONST:Off
p 2855 1139 100 0 1 TWST:Timeout
p 2857 1123 100 0 1 THST:Comm.
p 2771 1178 100 0 1 ZRVL:0
p 2674 1192 100 0 -1 PV:$(D)
p 2773 1107 100 0 1 FRVL:4
p 2861 1105 100 0 1 FRST:Not Monitored
p 2772 1091 100 0 1 FVVL:5
p 2859 1088 100 0 1 FVST:Water/Temp.
use inhier 947 1152 100 0 scanin
xform 0 984 1128
use outhier 2467 1766 100 0 flink
xform 0 2480 1736
use inhier 1077 1862 100 0 enable
xform 0 1112 1840
use outhier 2319 1113 100 0 statok
xform 0 2336 1096
use trcalcos 1273 1035 100 0 $(PS):STATCOMM
xform 0 1352 1320
p 1217 1035 100 0 -1 PV:$(D)
p 983 1505 100 0 -1 def(INPA):$(PS):STATON.STAT
p 971 1475 100 0 -1 def(INPB):$(PS):CURRDBK.STAT
p 994 1441 100 0 -1 def(INPC):$(PS):RDVOL.STAT
p 894 1409 100 0 -1 def(INPD):$(PS):RDUNSIGNEDCUR.STAT
p 992 1378 100 0 -1 def(INPE):$(PS):FAULT.STAT
p 993 1346 100 0 -1 def(INPF):$(PS):INTFLT0.STAT
p 974 1311 100 0 -1 def(INPG):$(PS):INTFLT1.STAT
p 987 1279 100 0 -1 def(INPH):$(PS):KLIXFLT0.STAT
p 1288 1480 150 0 1 CALC:!(A&&B&&C&&D&&E&&F&&G&&H&&I)
p 1292 1460 100 0 1 OCAL:0
p 989 1245 100 0 -1 def(INPI):$(PS):KLIXFLT1.STAT
use ecalcos 1991 1412 100 0 $(PS):DRVDISABLE
xform 0 2088 1704
p 1935 1412 100 0 -1 PV:$(D)
p 2024 1864 150 0 1 CALC:A&(B=1)
p 2248 1668 100 0 1 def(OUT):$(PS):DRVNOCHANGE.DISA
p 2028 1844 100 0 1 OCAL:0
p 1764 1857 100 0 -1 def(INPB):$(D)$(PS):STATUS
p 2024 1608 100 0 1 OOPT:On Change
[comments]

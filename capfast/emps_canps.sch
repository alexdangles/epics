[schematic2]
uniq 9
[tools]
[detail]
w 1616 1363 100 0 n#1 trcalcos.$(PS):STATUS.INPL 1656 1360 1576 1360 1576 1392 1520 1392 inhier.enable.P
w 4574 1779 100 0 n#2 ecalcos.$(PS):CURTRIP.FLNK 4552 1776 4596 1776 4596 1824 4640 1824 outhier.flink.p
w 4588 1747 100 0 n#3 ecalcos.$(PS):CURTRIP.VAL 4552 1744 4624 1744 4624 1784 4704 1784 outhier.statok.p
w 1056 1251 100 0 n#4 inhier.scanin.P 976 1248 1136 1248 1136 1192 1184 1192 esels.$(PS):LOCKSEL.SLNK
w 1536 1435 100 0 n#5 esels.$(PS):LOCKSEL.FLNK 1472 1432 1600 1432 1600 1328 1656 1328 trcalcos.$(PS):STATUS.SLNK
w 1475 1476 100 0 n#6 esels.$(PS):LOCKSEL.VAL 1472 1400 1472 1552 1656 1552 trcalcos.$(PS):STATUS.INPF
w 3104 1555 100 0 n#7 trcalcos.$(PS):STATUS.FLNK 1944 1552 4264 1552 ecalcos.$(PS):CURTRIP.SLNK
w 4154 1962 -100 0 n#8 inhier.lock.P 4136 1960 4232 1960 4232 1936 4264 1936 ecalcos.$(PS):CURTRIP.INPA
n 1659 1955 2161 2027 100
FUNCTIONALITY:
CHECK THAT STREAM DEVICE OPTICS ELEMENT IS ON,
COMMUNICATING AND NOT IN TIMEOUT STATE.
_
n 2209 1618 2530 1714 100
LED RULES FOR $(D)$(PS):STATUS:
0: PATH BAD -> RED
1: PATH GOOD -> GREEN
2: DISABLED -> BLACK
_
n 2812 1987 3215 2057 150
Functionality:
Please add functionality here
_
[cell use]
use bb200tr 712 632 100 0 bb200tr#2
xform 0 1992 1432
p 2296 824 150 0 -1 seta:M. Rowe
p 2152 1016 150 0 -1 sets:E-Linac Control System
p 2152 984 100 0 -1 sett0:Machine Protect System
p 2152 952 100 0 -1 sett1:Optics Subsystem - Stream Device PS Status
p 2568 824 150 0 -1 setdat:2016/08/15
p 2328 872 200 0 -1 setd:$Revision: 1.1 $
p 2168 760 150 0 -1 setf:emps_canps.sch
use trcalcos 1740 1219 100 0 $(PS):STATUS
xform 0 1800 1520
p 1684 1219 100 0 -1 PV:$(D)
p 1489 1706 100 0 -1 def(INPA):$(PS):STATON MS
p 1478 1673 100 0 -1 def(INPB):$(PS):STATTMO MS
p 1511 1640 100 0 -1 def(INPC):$(PS):ALIVE MS
p 1503 1609 100 0 -1 def(INPD):$(PS):STATPRES
p 1736 1680 150 0 1 CALC:L?((A&!B&C&D&!E)?1:0):2
p 1735 1659 100 0 1 OCAL:L?(E?4:(!D|!C?3:(B?2:(!A?1:F)))):5
p 1950 1483 100 0 1 def(OUT):$(D)$(PS):STATTEXT PP
p 1736 1424 100 0 1 OOPT:Every Time
p 1739 1639 100 0 1 DOPT:Use OCAL
p 1526 1577 100 0 -1 def(INPE):$(PS):STATLB
p 1444 1544 100 0 0 def(INPG):
p 1403 1547 100 0 0 def(INPF):
use embbis 3442 1216 100 0 $(PS):STATTEXT
xform 0 3536 1280
p 3478 1182 100 0 1 ONVL:1
p 3481 1165 100 0 1 TWVL:2
p 3483 1148 100 0 1 THVL:3
p 3568 1200 100 0 1 ZRST:OK
p 3563 1182 100 0 1 ONST:Off
p 3567 1163 100 0 1 TWST:Timeout
p 3569 1147 100 0 1 THST:CANBUS
p 3483 1202 100 0 1 ZRVL:0
p 3386 1216 100 0 -1 PV:$(D)
p 3485 1131 100 0 1 FRVL:4
p 3487 1114 100 0 1 FVVL:5
p 3571 1129 100 0 1 FRST:Loop Back
p 3571 1111 100 0 1 FVST:Not Monitored
p 3488 1098 100 0 1 SXVL:6
p 3569 1095 100 0 1 SXST:Tune Lock Trip
use inhier 939 1272 100 0 scanin
xform 0 976 1248
use outhier 4611 1854 100 0 flink
xform 0 4624 1824
use inhier 1485 1414 100 0 enable
xform 0 1520 1392
use outhier 4671 1801 100 0 statok
xform 0 4688 1784
use ecalcos 4311 1452 100 0 $(PS):CURTRIP
xform 0 4408 1744
p 4255 1452 100 0 -1 PV:$(D)
p 4344 1904 150 0 1 CALC:A?(ABS(B-C)<(0.005*ABS(D-E))):F
p 4572 1705 100 0 1 def(OUT):$(PS):CUR.DISP PP MS
p 4348 1884 100 0 1 OCAL:0
p 4069 1900 100 0 1 def(INPB):$(PS):CUR
p 4344 1648 100 0 1 OOPT:On Change
p 4043 1865 100 0 1 def(INPC):$(PS):RDCUR
p 4011 1831 100 0 1 def(INPD):$(PS):CUR.DRVH
p 4018 1802 100 0 1 def(INPE):$(PS):CUR.DRVL
p 4003 1768 100 0 1 def(INPF):$(D)$(PS):STATUS
p 3961 1930 100 0 0 def(INPA):
p 4152 1840 100 0 0 def(FLNK):
p 4316 1588 100 0 0 SCAN:Passive
use esels 1238 1119 100 0 $(PS):LOCKSEL
xform 0 1328 1384
p 1182 1119 100 0 -1 PV:$(D)
p 1071 1570 100 0 1 def(INPA):0
p 1071 1538 100 0 1 def(INPB):6
p 873 1603 100 0 1 def(NVL):$(D)$(PS):CURTRIP
p 1072 1505 100 0 0 def(INPC):0
use inhier 4099 1984 100 0 lock
xform 0 4136 1960
[comments]

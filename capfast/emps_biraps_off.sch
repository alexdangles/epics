[schematic2]
uniq 7
[tools]
[detail]
w 2402 1739 100 0 n#1 trcalcos.$(PS):STATUSOFF.FLNK 2336 1736 2468 1736 2468 1752 2600 1752 outhier.flink.p
w 2008 1547 100 0 n#2 trcalcos.$(PS):STATUSOFF.INPL 2048 1544 1968 1544 1968 1576 1784 1576 inhier.enable.P
w 2468 1707 100 0 n#3 trcalcos.$(PS):STATUSOFF.VAL 2336 1704 2600 1704 outhier.statok.p
w 1096 1131 100 0 n#4 trcalcos.$(PS):STATOFFCOMM.SLNK 1208 1128 984 1128 inhier.scanin.P
w 1704 1355 100 0 n#5 trcalcos.$(PS):STATOFFCOMM.FLNK 1496 1352 1912 1352 1912 1512 2048 1512 trcalcos.$(PS):STATUSOFF.SLNK
w 1572 1323 100 0 n#6 trcalcos.$(PS):STATOFFCOMM.VAL 1496 1320 1648 1320 1648 1664 2040 1664 trcalcos.$(PS):STATUSOFF.INPH
n 2619 1971 3086 2043 100
FUNCTIONALITY:
CHECK THAT BiRa DEVICE OPTICS ELEMENT IS ON,
COMMUNICATING AND NOT IN TIMEOUT STATE.
_
n 2193 1954 2514 2050 100
LED RULES FOR $(D)$(PS):STATUS:
0: PATH BAD -> RED
1: PATH GOOD -> GREEN
2: DISABLED -> BLACK
_
n 2812 1987 3215 2057 150
Functionality:
Please add functionality here
_
[cell use]
use bb200tr 712 632 100 0 bb200tr#2
xform 0 1992 1432
p 2296 824 150 0 -1 seta:M. Rowe
p 2152 1016 150 0 -1 sets:E-Linac Control System
p 2152 984 100 0 -1 sett0:Machine Protect System
p 2152 952 100 0 -1 sett1:Optics Subsystem - Stream Device PS Status
p 2568 824 150 0 -1 setdat:2016/08/15
p 2328 872 200 0 -1 setd:$Revision: 1.1 $
p 2168 760 150 0 -1 setf:emps_biraps_off.sch
use trcalcos 2132 1403 100 0 $(PS):STATUSOFF
xform 0 2192 1704
p 2076 1403 100 0 -1 PV:$(D)
p 1881 1890 100 0 -1 def(INPA):$(PS):STATON
p 1870 1857 100 0 -1 def(INPB):$(PS):STATTMO
p 1892 1822 100 0 -1 def(INPC):$(PS):FAULT
p 1879 1791 100 0 -1 def(INPD):$(PS):INTFLT0
p 2128 1864 150 0 1 CALC:L?((!A&!(B&C&D&E&F&G))?1:0):2
p 2127 1843 100 0 1 OCAL:L?!H?3:B?2:A?1:(!(C|D|E|F|G)?5:0):4
p 2342 1667 100 0 1 def(OUT):$(D)$(PS):STATOFFTEXT PP
p 2128 1608 100 0 1 OOPT:Every Time
p 2126 1586 100 0 1 DOPT:Use OCAL
p 1883 1761 100 0 -1 def(INPE):$(PS):INTFLT1
p 1871 1727 100 0 -1 def(INPF):$(PS):KLIXFLT0
p 1873 1694 100 0 -1 def(INPG):$(PS):KLIXFLT1
p 1838 1666 100 0 0 def(INPH):
p 1813 1632 100 0 0 def(INPI):
p 1872 1601 100 0 0 def(INPJ):
use inhier 947 1152 100 0 scanin
xform 0 984 1128
use outhier 2571 1782 100 0 flink
xform 0 2584 1752
use inhier 1749 1598 100 0 enable
xform 0 1784 1576
use outhier 2567 1721 100 0 statok
xform 0 2584 1704
use trcalcos 1273 1035 100 0 $(PS):STATOFFCOMM
xform 0 1352 1320
p 1217 1035 100 0 -1 PV:$(D)
p 983 1505 100 0 -1 def(INPA):$(PS):STATON.STAT
p 971 1475 100 0 -1 def(INPB):$(PS):CURRDBK.STAT
p 994 1441 100 0 -1 def(INPC):$(PS):RDVOL.STAT
p 894 1409 100 0 -1 def(INPD):$(PS):RDUNSIGNEDCUR.STAT
p 992 1378 100 0 -1 def(INPE):$(PS):FAULT.STAT
p 993 1346 100 0 -1 def(INPF):$(PS):INTFLT0.STAT
p 974 1311 100 0 -1 def(INPG):$(PS):INTFLT1.STAT
p 987 1279 100 0 -1 def(INPH):$(PS):KLIXFLT0.STAT
p 1288 1480 150 0 1 CALC:!(A&&B&&C&&D&&E&&F&&G&&H&&I)
p 1292 1460 100 0 1 OCAL:0
p 989 1245 100 0 -1 def(INPI):$(PS):KLIXFLT1.STAT
use embbis 2530 1504 100 0 $(PS):STATOFFTEXT
xform 0 2624 1568
p 2566 1470 100 0 1 ONVL:1
p 2569 1453 100 0 1 TWVL:2
p 2571 1436 100 0 1 THVL:3
p 2656 1488 100 0 1 ZRST:OK
p 2651 1470 100 0 1 ONST:On
p 2655 1451 100 0 1 TWST:Timeout
p 2657 1435 100 0 1 THST:Comm.
p 2571 1490 100 0 1 ZRVL:0
p 2474 1504 100 0 -1 PV:$(D)
p 2573 1419 100 0 1 FRVL:4
p 2661 1417 100 0 1 FRST:Not Monitored
p 2572 1403 100 0 1 FVVL:5
p 2659 1400 100 0 1 FVST:Water/Temp.
[comments]
